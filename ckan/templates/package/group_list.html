{% extends "package/read_base.html" %}
{% import 'macros/form.html' as form %}

{% block primary_content_inner %}
  <h2 class="hide-heading">{{ _('Groups') }}</h2>

  {% if c.group_dropdown %}
    <form class="add-to-group" method="post">
      <select id="field-add_group" name="group_added" data-module="autocomplete">
        {% for group in c.group_dropdown %}
        <pre>
          {{ group }}
        </pre>
        {% set is_root = 'extras' not in group or group.extras|length == 0 or group.extras[0].key != 'parent' or group.extras[0].value == '__root__' or group.extras[0]|length == 0 %}
        {% if not is_root %}
          <option value="{{ group.id }}"> {{ group.extras[0].value + " > " + group.display_name }}</option>
        {% endif %}
        {% endfor %}
      </select>
      <button type="submit" class="btn btn-primary" title="{{ _('Associate this group with this dataset') }}">{{ _('Add to group') }}</button>
    </form>
  {% endif %}

  {% if c.pkg_dict.groups %}
    <form method="post">
      {% snippet 'group/snippets/group_list.html', groups=c.pkg_dict.groups %}
    </form>
  {% else %}
    <p class="empty">{{ _('There are no groups associated with this dataset') }}</p>
  {% endif %}

{% endblock %}
